# Crypto Tax Calculator Configuration
# Version: 2.0.0

# =============================================================================
# Default Settings
# =============================================================================

defaults:
  cost_basis_method: fifo           # fifo, lifo, hifo
  output_format: table              # table, json, csv
  holding_period_days: 365          # Days for long-term classification
  report_width: 78                  # Terminal output width

# =============================================================================
# Tax Year Configuration
# =============================================================================

tax_year:
  # US tax year (January 1 - December 31)
  start_month: 1
  start_day: 1

  # Set to true if using fiscal year
  use_fiscal_year: false

# =============================================================================
# Exchange CSV Formats
# =============================================================================

exchange_formats:
  coinbase:
    date_col: "Timestamp"
    type_col: "Transaction Type"
    asset_col: "Asset"
    quantity_col: "Quantity Transacted"
    price_col: "Spot Price at Transaction"
    fee_col: "Fees and/or Spread"
    date_format: "%Y-%m-%dT%H:%M:%SZ"

  binance:
    date_col: "Date(UTC)"
    type_col: "Operation"
    asset_col: "Coin"
    quantity_col: "Change"
    price_col: null                  # Requires manual price lookup
    fee_col: null
    date_format: "%Y-%m-%d %H:%M:%S"

  kraken:
    date_col: "time"
    type_col: "type"
    asset_col: "asset"
    quantity_col: "amount"
    price_col: null
    fee_col: "fee"
    date_format: "%Y-%m-%d %H:%M:%S.%f"

  gemini:
    date_col: "Date"
    type_col: "Type"
    asset_col: "Symbol"
    quantity_col: "Amount"
    price_col: "Price"
    fee_col: "Fee"
    date_format: "%Y-%m-%d %H:%M:%S"

  generic:
    date_col: "date"
    type_col: "type"
    asset_col: "asset"
    quantity_col: "quantity"
    price_col: "price"
    fee_col: "fee"
    date_format: null                # Auto-detect

# =============================================================================
# Transaction Type Mapping
# =============================================================================

transaction_types:
  # Acquisitions (create lots)
  acquisitions:
    - buy
    - receive
    - deposit
    - advanced trade buy

  # Disposals (use lots)
  disposals:
    - sell
    - send
    - withdrawal
    - advanced trade sell
    - convert
    - trade
    - swap
    - exchange

  # Income events (taxed at receipt)
  income:
    - staking
    - airdrop
    - mining
    - interest
    - reward
    - rewards income
    - staking income
    - coinbase earn
    - learning reward

  # Non-taxable
  non_taxable:
    - transfer
    - transfer_in
    - transfer_out

# =============================================================================
# Asset Symbol Normalization
# =============================================================================

symbol_mappings:
  # Kraken symbols
  XBT: BTC
  XXBT: BTC
  XETH: ETH
  ZUSD: USD
  ZEUR: EUR
  ZGBP: GBP

  # Common variations
  WBTC: BTC
  WETH: ETH

# =============================================================================
# Historical Price API
# =============================================================================

price_api:
  provider: coingecko
  base_url: "https://api.coingecko.com/api/v3"
  cache_file: ".price_cache.json"
  cache_ttl: 86400                  # Cache for 24 hours (seconds)
  timeout: 15                       # Request timeout in seconds

# =============================================================================
# Output Formatting
# =============================================================================

formatting:
  decimal_places:
    quantity: 8
    price: 2
    value: 2
    percent: 2

  date_format:
    display: "%m/%d/%Y"             # MM/DD/YYYY for reports
    iso: "%Y-%m-%d"                 # ISO format for JSON/CSV

# =============================================================================
# Warnings and Thresholds
# =============================================================================

warnings:
  # Warn if disposing more than available
  warn_insufficient_lots: true

  # Warn if price is missing
  warn_missing_price: true

  # Warn if holding period cannot be determined
  warn_unknown_holding_period: true

  # Maximum rows to show warnings for (0 = all)
  max_warnings: 10

# =============================================================================
# IRS Form 8949 Categories
# =============================================================================

form_8949:
  # Box A: Short-term transactions reported on 1099-B with basis
  # Box B: Short-term transactions NOT reported on 1099-B
  # Box C: Short-term transactions with basis not reported to IRS
  # Box D: Long-term transactions reported on 1099-B with basis
  # Box E: Long-term transactions NOT reported on 1099-B
  # Box F: Long-term transactions with basis not reported to IRS

  # Default to Box C (short) and Box F (long) for crypto
  short_term_box: C
  long_term_box: F

# =============================================================================
# Tax Disclaimer
# =============================================================================

disclaimer: |
  This tool provides informational calculations only. It is NOT tax advice.
  Tax laws vary by jurisdiction and change over time. Consult a qualified
  tax professional for advice specific to your situation. Keep original
  records for audit purposes.
